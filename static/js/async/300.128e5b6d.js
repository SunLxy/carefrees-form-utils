(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["300"],{9165:function(){},7411:function(e,t,n){"use strict";n.d(t,{xJ:()=>eP,j_:()=>eb,Wb:()=>eA,fR:()=>e_,l0:()=>eE,qo:()=>eh,yB:()=>K,lt:()=>ey,cI:()=>Q});var r=n(4246),o=n(7378),a=n(8191),s=n.n(a),i=n(5511);let l=i.ZP.div`
  width: 100%;
  display: grid;
  grid-template-columns: repeat(4, auto);
  gap: 2px;
  padding-left: 2px;
  padding-right: 2px;
  box-sizing: border-box;
  ${e=>e.$colCount?(0,i.iv)`
        grid-template-columns: repeat(${e.$colCount}, auto);
      `:""}
  ${e=>"number"==typeof e.$gap?(0,i.iv)`
        gap: ${e.$gap}px;
      `:e.$gap?(0,i.iv)`
        gap: ${e.$gap};
      `:""}
`,m=i.ZP.div`
  font-size: 14px;
  font-weight: 500;
  color: var(--form-header-color, #1d2129);
  box-sizing: border-box;
`,d=i.ZP.div`
  font-size: 14px;
  font-weight: 600;
  color: var(--form-header-color, #1d2129);
  box-sizing: border-box;
`,c=i.ZP.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-direction: row;
  border-bottom: 1px solid var(--form-border-color, #e0e0e0);
  padding-top: 5px;
  padding-bottom: 5px;
  margin-block-end: 4px;
  padding-inline-start: 2px;
  padding-inline-end: 2px;
  box-sizing: border-box;
`,u=i.ZP.div`
  width: 100%;
  box-sizing: border-box;
  border-radius: 4px;
  padding-bottom: 8px;
  position: relative;
  ${e=>e.$isAllColSpan?(0,i.iv)`
        grid-column: 1 / -1;
      `:""}
  ${e=>e.$bordered?(0,i.iv)`
        border: 1px solid var(--form-border-color, #e0e0e0);
        ${c} {
          padding-inline-start: 8px;
          padding-inline-end: 8px;
        }
      `:""}
`;n(9165);let h=/\\(\\)?/g,f=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),p=e=>{let t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(f,(e,n,r,o)=>{let a=e;r?a=o.replace(h,"$1"):n&&(a=n.trim()),t.push(a)}),t};function g(e){let t=typeof e;return"symbol"===t||"object"===t&&null!=e&&"[object Symbol]"===function(e){let t=Object.prototype.toString;return null==e?void 0===e?"[object Undefined]":"[object Null]":t.call(e)}(e)}let x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y=/^\w*$/;function b(e,t){return Array.isArray(e)?e:!function(e,t){if(Array.isArray(e))return!1;let n=typeof e;return!!("number"===n||"boolean"===n||null==e||g(e))||y.test(e)||!x.test(e)||null!=t&&e in Object(t)}(e,t)?p(e):[e]}let F=1/0;function I(e){if("string"==typeof e||g(e))return e;let t=`${e}`;return"0"===t&&1/e==-F?"-0":t}function v(e){let t=typeof e;return null!=e&&("object"===t||"function"===t)}let j=/^(?:0|[1-9]\d*)$/;function R(e,t){let n=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"===n||"symbol"!==n&&j.test(e))&&e>-1&&e%1==0&&e<t}function w(e,t,n){"__proto__"===t?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}let S=Object.prototype.hasOwnProperty;function C(e,t){return null!=e&&S.call(e,t)}function D(e){return null!=e&&"object"==typeof e}var N=Object.prototype,L=N.toString,M=Symbol?Symbol.toStringTag:void 0,L=N.toString;function V(e){return D(e)&&"[object Arguments]"==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":M&&M in Object(e)?function(e){var t=S.call(e,M),n=e[M];try{e[M]=void 0;var r=!0}catch(e){}var o=L.call(e);return r&&(t?e[M]=n:delete e[M]),o}(e):L.call(e)}(e)}let $=N.propertyIsEnumerable;var P=V(function(){return arguments}())?V:function(e){return D(e)&&S.call(e,"callee")&&!$.call(e,"callee")};function A(e,t){return null!=e&&function(e,t,n){t=b(t,e);for(var r,o=-1,a=t.length,s=!1;++o<a;){var i=I(t[o]);if(!(s=null!=e&&n(e,i)))break;e=e[i]}return s||++o!=a?s:!!(a=null==e?0:e.length)&&"number"==typeof(r=a)&&r>-1&&r%1==0&&r<=0x1fffffffffffff&&R(i,a)&&(Array.isArray(e)||P(e))}(e,t,C)}let _=(e,t,n)=>{let r=null==e?void 0:function(e,t){t=b(t,e);let n=0,r=t.length;for(;null!=e&&n<r;)e=e[I(t[n++])];return n&&n===r?e:void 0}(e,t);return void 0===r?n:r};function E(e,t,n){return null==e?e:function(e,t,n,r){if(!v(e))return e;let o=(t=b(t,e)).length,a=o-1,s=-1,i=e;for(;null!=i&&++s<o;){let e=I(t[s]),r=n;if(s!==a){let n=i[e];r=void 0,r=Array.isArray(n)?[...n]:null!==n&&"[object Object]"===Object.prototype.toString.call(n)?{...n}:v(n)?n:R(t[s+1])?[]:{}}!function(e,t,n){let r=e[t];S.call(e,t)&&(r===n||r!=r&&n!=n)?void 0!==n||t in e||w(e,t,n):(0!==n||1/n==1/r)&&w(e,t,n)}(i,e,r),i=i[e]}return e}(e,t,n)}function k(e,t){let n={};return t.forEach(t=>{let r=_(e,t);n=E(n,t,r)}),n}class z{sort;name="";updated;dependencies=[];isWatch=!1;instance}class O extends z{ctor=e=>(this.name=e,this);preHideValue;updatedItem;updated=()=>{!!this.instance?.getFieldHideValue(this.name)!=!!this.preHideValue&&this.updatedItem?.({})}}var B=n(8121);class H{sort;instance;name="";rules=[];messages;updated;isRequired=()=>!this.instance?.getFieldHideRulesValue?.(this.name)&&!!(this.rules||[]).find(e=>e?.required);ctor=(e,t)=>(this.name=e,this.rules=t||[],this);isValidate=()=>!this.instance?.getFieldHideRulesValue?.(this.name)&&Array.isArray(this.rules)&&this.rules.length;updatedMessages=e=>{this.messages=e||[],this.updated?.({})};updatedRules=e=>{this.rules=e,this.updatedMessages?.([])};validate=(e=!1)=>new Promise((t,n)=>{let r=this.instance?.getFieldValue?.(this.name);this.instance?.getFieldHideRulesValue?.(this.name)&&(this.updatedMessages([]),t({[this.name]:r})),new B.Z({[this.name]:this.rules||[]}).validate({[this.name]:r}).then(n=>{e||this.updatedMessages([]),t(n)}).catch(({errors:t})=>{Array.isArray(t)?(e||this.updatedMessages(t),n(t)):n()})});getValidateResult=()=>{let e=Array.isArray(this.messages)?this.messages.map(e=>e.message):"",t=Array.isArray(e)?!!e.length:!!e;return{tip:e,isInvalid:t}}}class Z{formData={};formItemInstances=[];formListInstances=new Map([]);hideItemInstances=[];hideState={};isMountInstance=!1;preserve=!0;hideRuleState={};onValuesChange;onFinish;onFinishFailed;ctor=(e={},t,n)=>(this.formData=e||{},this.hideState=t||{},this.hideRuleState=n||{},this.isMountInstance=!0,this);dispatch_resetFieldValueCount=0;resetFormValues=(e={})=>{if(0===this.dispatch_resetFieldValueCount)return void this.dispatch_resetFieldValueCount++;this.dispatch_resetFieldValueCount++;let t=Object.keys({...e,...this.formData});return this.formData=e||{},this.notice(t,"restValues"),this};resetFieldsValue=(e={})=>{let t=Object.keys({...e});return this.formData=Object.assign(this.formData,e),this.notice(t,"restValues"),this};registerFormList=(e,t)=>(this.formListInstances.set(e,t),()=>{this.formListInstances.delete(e)});registerFormItem=e=>(this.formItemInstances.push(e),()=>{this.formItemInstances=this.formItemInstances.filter(t=>t!==e);let t=this.preserve;!1===e.preserve&&(t=e.preserve);let n=`${e.name}`;n&&A(this.formData,n)&&!t&&(this.formData=E(this.formData,e.name,void 0))});registerFormHideItem=e=>(this.hideItemInstances.push(e),()=>{this.hideItemInstances=this.hideItemInstances.filter(t=>t!==e)});transferChangeValue=e=>{if(this.onValuesChange){let t=this.getFieldValue();if("string"==typeof e){let n=k(t,[e]);this.onValuesChange?.(n,t)}else this.onValuesChange?.(e,t)}return this};updatedFieldHideValue=e=>{let t=Object.keys(e||{});return t.forEach(t=>{this.hideState=E(this.hideState,t,e[t])}),this.noticeHide(t),this};updatedFieldHideRulesValue=e=>{let t=Object.keys(e||{});return t.forEach(t=>{this.hideRuleState=E(this.hideRuleState,t,e[t])}),t.forEach(e=>{let t=this.formItemInstances.find(t=>t.name===e);t&&t?.rule&&t.rule?.updatedMessages?.([])}),this};updatedFieldValue=(e,t,n="validate",r=!1)=>{if(this.formData=E(this.formData,e,t),!0!==r){if(this.transferChangeValue(e),this.notice(e),"validate"===n)this.onlyValidate(e);else if("clear"===n){let t=this.formItemInstances.find(t=>t.name===e);t&&t?.rule&&t.rule?.updatedMessages?.([])}return this}};bathUpdatedFieldValue=(e,t=!0,n=!0,r=!1)=>{let o=Object.keys(e||{});if(o.forEach(t=>{this.formData=E(this.formData,t,e[t])}),!0!==r)return t&&this.transferChangeValue(e),n&&this.onlyValidate(o),this.notice(o),this};getFormListInstance=e=>this.formListInstances.get(e);getFieldValue=e=>e?A(this.formData,e)?_(this.formData,e):void 0:this.formData;getFieldHideRulesValue=e=>e?_(this.hideRuleState,e):this.hideRuleState;getFieldHideValue=e=>e?_(this.hideState,e):this.hideState;notice=(e,t)=>(this._bathNotice(this.formItemInstances,e,!1,t),this);noticeHide=e=>(this._bathNotice(this.hideItemInstances,e),this);noticeWatch=e=>(this._bathNotice(this.formItemInstances,e,!0),this);_bathNotice_judge=(e,t,n)=>{if(t)e.isWatch&&e.updated?.({});else{let t=e?.rule;try{"restValues"===n&&t&&t instanceof H?e?.rule?.updatedMessages?.([]):e.updated?.({})}catch(t){e.updated?.({})}}};_bathNotice=(e,t,n,r)=>("string"==typeof t?e.forEach(e=>{e.name===t?this._bathNotice_judge(e,n,r):Array.isArray(e.dependencies)&&e.dependencies.length&&e.dependencies.find(e=>e===t)&&this._bathNotice_judge(e,n,r)}):Array.isArray(t)?e.forEach(e=>{t.includes(e.name)?this._bathNotice_judge(e,n,r):Array.isArray(e.dependencies)&&e.dependencies.length&&e.dependencies.find(e=>t.includes(e))&&this._bathNotice_judge(e,n,r)}):e.forEach(e=>{this._bathNotice_judge(e,n,r)}),this);onlyValidate=async e=>{try{Array.isArray(e)?await this.validate(e,!1):await this.validate([e],!1)}catch(e){console.log(e)}return this};onlyValidateRulesMessage=e=>new Promise(async(t,n)=>{let r=[],o=[],a=this.formItemInstances.filter(e=>!e.isWatch),s=a.length,i=Array.isArray(e)&&e.length;for(let t=0;t<s;t++){let n=a[t];if(!n.isWatch)if(n.rule&&n.rule.isValidate()){let t=!0;i&&(e.find(e=>e===n.name)||(t=!1));try{t&&(await n.rule.validate(!0),o.push({errors:[],sort:n.sort,name:n.name}))}catch(e){if(e){r.push({errors:e,sort:n.sort,name:n.name});break}}}else o.push({errors:[],sort:n.sort,name:n.name})}r.length?n({errorFields:r}):t({errorFields:[]})});validate=(e,t=!0)=>new Promise(async(n,r)=>{let o=[],a=[],s=this.formItemInstances.filter(e=>!e.isWatch),i=s.map(e=>e.name),l=s.length,m=Array.isArray(e)&&e.length;for(let t=0;t<l;t++){let n=s[t];if(!n.isWatch)if(n.rule&&n.rule.isValidate()){let t=!0;m&&(e.find(e=>e===n.name)||(t=!1));try{t&&(await n.rule.validate(),a.push({errors:[],sort:n.sort,name:n.name}))}catch(e){e&&o.push({errors:e,sort:n.sort,name:n.name})}}else a.push({errors:[],sort:n.sort,name:n.name})}let d=t?k(this.getFieldValue(),i):{};o.length?r({errorFields:o,values:d}):n(d)});submit=async()=>{try{let e=await this.validate();e&&this?.onFinish?.(e)}catch(e){this.onFinishFailed?.(e)}}}class W extends z{parentDataField;noticeOnlyRuleDataField;isNoticeParentField;noticeWatchField;htmlFor;control;rule;preserve=!0;onAfterUpdate;onChange;ctor=(e,t)=>(this.name=e,this.rule=t,this)}class T extends z{rule;formItemInstance;parentDataField;keys=[];id=0;ctor=e=>(this.name=e,this);getLastValue=()=>{let e=this.instance?.getFieldValue?.(this.name);return Array.isArray(e)?e:[]};onAdd=(e={},t)=>{let n=this.getLastValue();if(t){let t=[e||{},...n];this.keys=[this.id,...this.keys],this.id++,this.instance?.updatedFieldValue?.(this.name,t)}else{let t=[...n,e||{}];this.keys=[...this.keys,this.id],this.id++,this.instance?.updatedFieldValue?.(this.name,t)}};onDelete=e=>{let t=this.getLastValue(),n=Array.isArray(e)?e:[e];this.keys=this.keys.filter((e,t)=>!n.includes(t));let r=t.filter((e,t)=>!n.includes(t));this.instance?.updatedFieldValue?.(this.name,r)};onMove=(e,t)=>{let n=this.getLastValue(),r=n[e],o=n[t];n[e]=o,n[t]=r,this.instance?.updatedFieldValue?.(this.name,[...n])};updatedItem=(e,t)=>{let n=this.getLastValue(),r=n[e];n[e]={...r,...t},this.instance?.updatedFieldValue?.(this.name,[...n])};getFields=()=>this.getLastValue().map((e,t)=>{let n=this.keys[t];return void 0===n&&(this.keys[t]=this.id,n=this.keys[t],this.id++),{name:t,key:n}})}class q{instanceMap=new Map([]);ctor=(e,t)=>(this.instanceMap.set(e,t),()=>{this.instanceMap.delete(e)});getInstance=e=>e?this.instanceMap.get(e):this.instanceMap;validate=e=>new Promise(async(t,n)=>{let r={},o=!0,a=[],s=!1;e?Array.isArray(e)?a=e:"[object Object]"===Object.prototype.toString.call(e)?(s=!0,a=Object.keys(e)):a=[e]:a=Array.from(this.instanceMap.keys());let i=a.length;for(let t=0;t<i;t++){let n=a[t],i=this.instanceMap.get(n);try{if(i){let t=s?e[n]:void 0,o=await i.validate(t);r[n]={errorFields:[],values:o}}}catch(e){o=!1,r[n]=e}}o?t(r):n(r)});getFormFieldValue=(e,t)=>{if(!e){let e={};return this.instanceMap.forEach((t,n)=>{e[n]=t.getFieldValue()}),e}let n=this.instanceMap.get(e);if(n){if("string"==typeof t)return{[e]:n.getFieldValue(t)};if(t)return{[e]:k(n.getFieldValue(),t)}}return{[e]:{}}}}let U=(0,o.createContext)({name:"",sort:""}),J=e=>{let{name:t,sort:n,children:r}=e,a=(0,o.useMemo)(()=>({name:t,sort:n}),[t,n]);return(0,o.createElement)(U.Provider,{value:a,children:r})},X=e=>{let{isJoinParentField:t=!0,sort:n,name:r}=e,a=(0,o.useContext)(U),s=a.name,i=a.sort;return{newName:(0,o.useMemo)(()=>{if(s&&t){if(/^\./.test(`${r}`));else if(r)return[s,".",r].filter(Boolean).join("");return[s,r].filter(Boolean).join("")}return[r].filter(Boolean).join("")},[t,r,s]),newSort:(0,o.useMemo)(()=>[t?i:"",n].filter(Boolean).join("-"),[t,i,n]),parentItem:a,parentName:s}},G=(0,o.createContext)(new Z);function K(){return(0,o.useContext)(G)}function Q(e){let t=(0,o.useRef)();return t.current||(e?t.current=e:t.current=new Z),t.current}let Y=e=>{let{name:t,sort:n,isJoinParentField:r=!0}=e,a=K(),[,s]=(0,o.useState)({}),{newName:i,newSort:l}=X({name:t,sort:n,isJoinParentField:r}),m=(0,o.useRef)(new O().ctor(i)).current,d=a.getFieldHideValue(i);return m.preHideValue=d,m.instance=a,m.updatedItem=s,m.sort=l,(0,o.useEffect)(()=>{let e=a.registerFormHideItem(m);return()=>e()},[i]),{form:a,isHide:d}};(0,o.createContext)(new W);let ee=e=>{let t=(0,o.useRef)();return t.current||(e?t.current=e:t.current=new W),t.current},et=e=>{let{name:t,rules:n,sort:r,isJoinParentField:a=!0}=e,s=K(),{newName:i,newSort:l,parentName:m}=X({name:t,sort:r,isJoinParentField:a}),[,d]=(0,o.useState)({}),c=(0,o.useRef)(new H).current;(0,o.useMemo)(()=>c.ctor(i,n),[n,i]),c.instance=s,c.sort=l;let u=ee();return(0,o.useMemo)(()=>u.ctor(i,c),[]),u.instance=s,u.sort=l,u.parentDataField=m,u.updated=d,c.updated=d,(0,o.useEffect)(()=>{let e=s.registerFormItem(u);return()=>e()},[]),{ruleInstance:c,formItemInstance:u,form:s,parentName:m,newName:i}},en=(0,o.createContext)(new T),er=e=>{let t=(0,o.useRef)();return t.current||(e?t.current=e:t.current=new T),t.current},eo=e=>{let{...t}=e,{ruleInstance:n,formItemInstance:r,form:a,newName:s,parentName:i}=et({...t}),l=er();return(0,o.useMemo)(()=>l.ctor(s),[s]),l.instance=a,l.rule=n,l.sort=e.sort,l.formItemInstance=r,l.parentDataField=i,(0,o.useEffect)(()=>{let e=a.registerFormList(s,l);return()=>e()},[s,l]),{ruleInstance:n,formItemInstance:r,formListInstance:l}},ea=(0,o.createContext)(new q),es=()=>(0,o.useContext)(ea),ei=(e,t)=>{let n=es();return(0,o.useEffect)(()=>{let r;return t&&(r=n.ctor(t,e)),()=>{r?.()}},[t,e]),n},el=(0,o.createContext)({colCount:4,errorLayout:"left-bottom",labelMode:"top",showColon:!0,inputBordered:!0}),em=()=>(0,o.useContext)(el),ed=0,ec=e=>{let t=(0,o.useRef)(ed++);return(0,o.useMemo)(()=>`carefree-form-item_${t.current.toString(32)}_${e}`,[t.current,e])};class eu{name;form;oldValue;dispatch;callBack;updated=()=>{let e=this.form.getFieldValue(this.name);this.oldValue!==e&&(this.callBack?this.callBack(e,this.form):this.dispatch(e))}}let eh=(e,t,n)=>{let r=t||K(),[a,s]=(0,o.useState)(r.getFieldValue(e)),i=(0,o.useRef)(new eu).current;i.name=e,i.oldValue=a,i.dispatch=s,i.callBack=n,i.form=r;let l=ee();return(0,o.useMemo)(()=>l.ctor(e),[]),l.instance=r,l.isWatch=!0,l.updated=i.updated,(0,o.useEffect)(()=>{let e=r.registerFormItem(l);return()=>e()},[]),[a,r,i]};class ef{dom=(0,o.createRef)();onUpdatedResize;isListener=!0;_temp_size={width:-1,height:-1,offsetWidth:-1,offsetHeight:-1};onSize=()=>{let{width:e,height:t}=this.dom.current.getBoundingClientRect(),{offsetWidth:n,offsetHeight:r}=this.dom.current,o=Math.floor(e),a=Math.floor(t);if(this._temp_size.width!==o||this._temp_size.height!==a||this._temp_size.offsetWidth!==n||this._temp_size.offsetHeight!==r){let s={width:o,height:a,offsetWidth:n,offsetHeight:r};this._temp_size=s;let i=n===Math.round(e)?e:n,l=r===Math.round(t)?t:r,m={...s,offsetWidth:i,offsetHeight:l};this.onUpdatedResize&&Promise.resolve().then(()=>{this.onUpdatedResize(m,this.dom.current)})}};ensureObserver=()=>{let e=new ResizeObserver(this.onSize);return this.dom.current&&this.isListener&&e.observe(this.dom.current),()=>{e.disconnect()}}}let ep=(e={})=>{let{isListener:t=!0,onResize:n}=e,r=(0,o.useRef)(new ef).current;return r.onUpdatedResize=n,r.isListener=t,(0,o.useEffect)(()=>r.ensureObserver(),[r.dom,t]),r},eg=o.memo(e=>{let{colCount:t=4,children:n,className:a,style:i,gap:m,onResize:d,onGapRow:c}=e,u=(0,o.useRef)(e);u.current=e;let h=(0,o.useRef)(t);h.current=t;let f=(0,o.useMemo)(()=>s()("carefrees-form-layout-body",a),[a]),p=(0,o.useRef)({row:void 0,col:void 0}),g=(0,o.useRef)(0),x=ep({onResize:(0,o.useCallback)(e=>{"function"==typeof u.current.onResize&&u.current.onResize(e,x.dom.current),"function"==typeof u.current.onGapRow&&g.current!==e.height&&y()},[]),isListener:"function"==typeof d||"function"==typeof c}),y=(0,o.useCallback)(()=>{if("function"==typeof u.current.onGapRow&&x.dom.current)try{let e=[...x.dom.current.children],t=new Set;for(let n of e)if(n){let e=n?.offsetTop;t.add(e)}let n=t.size;if(p.current.row===n&&p.current.col===h.current)return;p.current={row:n,col:h.current},u.current.onGapRow(n,h.current,x.dom.current)}catch(e){console.log("计算行数失败",e)}},[]);return(0,o.useEffect)(()=>{y()},[t,x.dom]),(0,r.jsx)(l,{ref:x.dom,$gap:m,style:i,className:f,$colCount:t,children:n})}),ex="carefrees-form-layout",ey=o.memo(e=>{let{colCount:t=4,errorLayout:n="left-bottom",labelMode:a="left",showColon:i=!0,formItemClassName:l,formItemStyle:h,formItemLabelClassName:f,formItemLabelStyle:p}=em(),{colCount:g=t,title:x,extra:y,children:b,isAllColSpan:F,className:I,headerClassName:v,bodyClassName:j,style:R,headerStyle:w,bodyStyle:S,errorLayout:C=n,labelMode:D=a,showColon:N=i,formItemClassName:L=l,formItemStyle:M=h,formItemLabelClassName:V=f,formItemLabelStyle:$=p,bordered:P=!1,gap:A,onResize:_,onGapRow:E}=e;(0,o.useRef)(e).current=e;let k=(0,o.useMemo)(()=>s()(ex,I),[I]),z=(0,o.useMemo)(()=>s()(`${ex}-body`,j),[j]),O=(0,o.useMemo)(()=>s()(`${ex}-header`,v),[v]),B=(0,o.useMemo)(()=>s()(`${ex}-header-title`),[]),H=(0,o.useMemo)(()=>s()(`${ex}-header-extra`),[]),Z=(0,o.useMemo)(()=>({colCount:g,errorLayout:C,labelMode:D,showColon:N,formItemClassName:L,formItemStyle:M,formItemLabelClassName:V,formItemLabelStyle:$}),[g,C,D,N,L,M,V,$]);return(0,r.jsx)(el.Provider,{value:Z,children:(0,r.jsxs)(u,{$bordered:P,style:R,className:k,$isAllColSpan:F,children:[x||y?(0,r.jsxs)(c,{style:w,className:O,children:[(0,r.jsx)(d,{className:B,children:x}),(0,r.jsx)(m,{className:H,children:y})]}):(0,r.jsx)(o.Fragment,{}),(0,r.jsx)(eg,{onResize:_,onGapRow:E,gap:A,style:S,className:z,colCount:g,children:b})]})})}),eb=o.forwardRef((e,t)=>(0,r.jsx)(u,{...e,$isAllColSpan:!0,ref:t})),eF=i.ZP.form`
  box-sizing: border-box;
  --form-color: rgba(0, 0, 0, 0.88);
  --form-header-color: #1d2129;
  --form-font-size: 14px;
  --form-border-color: #e0e0e0;

  html.dark & {
    --form-color: #e3e3e3;
    --form-header-color: #e3e3e3;
    --form-font-size: 14px;
    --form-border-color: #e0e0e0;
  }

  font-size: var(--form-font-size);
  color: var(--form-color, rgba(0, 0, 0, 0.88));

  ${e=>e.$bgcolor?(0,i.iv)`
        background-color: ${e.$bgcolor};
      `:""}
`,eI=i.ZP.label`
  box-sizing: border-box;
  position: relative;
  font-size: 14px;
  color: var(--form-color, rgba(0, 0, 0, 0.88));
  ${e=>e.$showColon?(0,i.iv)`
          &::after {
            content: ':';
            display: inline-block;
            text-align: center;
            margin: 0;
            margin-inline-end: 2px;
            margin-inline-start: 2px;
          }
        `:""}
  ${({$required:e})=>e?(0,i.iv)`
          &::before {
            content: '*';
            color: red;
            display: inline-block;
            margin-inline-end: 4px;
          }
        `:""}
`,ev=i.ZP.div`
  box-sizing: border-box;
`,ej=i.ZP.div`
  box-sizing: border-box;
  width: 100%;
  flex: 1;
`,eR=i.ZP.div`
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  box-sizing: border-box;
  gap: 4px;
  flex: 1;
`,ew=i.ZP.div`
  position: absolute;
  width: 100%;
  color: red;
  top: auto;
  left: 0;
  right: 0;
  bottom: -16px;
  padding-top: 2px;
  font-size: 12px;
  box-sizing: border-box;
  z-index: 10;
  pointer-events: none;
  display: flex;
  flex-direction: row;
  justify-content: start;
  ${e=>"right-bottom"===e.$layout?(0,i.iv)`
          justify-content: flex-end;
          top: auto;
          left: 0;
          right: 0;
          bottom: -16px;
        `:""}
  ${e=>"top-left"===e.$layout?(0,i.iv)`
          justify-content: start;
          top: -16px;
          left: 0px;
          right: 0px;
          bottom: auto;
        `:""}  
  ${e=>"top-right"===e.$layout?(0,i.iv)`
          justify-content: flex-end;
          top: -16px;
          left: 0px;
          right: 0px;
          bottom: auto;
        `:""}
`,eS=i.ZP.div`
  width: 100%;
  box-sizing: border-box;
`,eC=i.ZP.div`
  box-sizing: border-box;
`,eD=i.ZP.div`
  flex: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 4px;
  box-sizing: border-box;
  ${e=>"left"===e.$labelMode?(0,i.iv)`
        flex-direction: row;
        gap: 8px;
        ${ev} {
          text-align: right;
        }
      `:"between"===e.$labelMode?(0,i.iv)`
        gap: 8px;
        text-align: left;
        flex-direction: row;
        justify-content: space-between;
        ${eR},${ej} {
          justify-content: flex-end;
          text-align: right;
        }
      `:""}
  @media (max-width: 576px) {
    && {
      flex-direction: column;
      gap: 4px;
    }
  }
`,eN=i.ZP.div`
  font-size: 14px;
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  padding: 8px;
  box-sizing: border-box;
  color: var(--form-color, rgba(0, 0, 0, 0.88));
  ${e=>e.$onlyRuleStyle?(0,i.iv)`
          padding: 0px;
        `:""}
  ${e=>{let{$colSpan:t,$colCount:n}=e;return t?(0,i.iv)`
        grid-column-end: span ${n>t?t:n};
      `:""}}
  ${e=>{let{$rowSpan:t}=e;return t?(0,i.iv)`
        grid-row-end: span ${t};
      `:""}}
`,eL="carefrees-form-item",eM=o.memo(e=>{let{formItemClassName:t,formItemLabelClassName:n,formItemLabelStyle:a,formItemStyle:i,labelMode:l="top",errorLayout:m="left-bottom",showColon:d=!0,colCount:c=4}=em(),{children:u,labelMode:h=l,onlyRuleStyle:f,label:p,helpText:g,extra:x,showColon:y=d,colSpan:b=1,rowSpan:F=1,validateResult:I,htmlFor:v,required:j,errorLayout:R=m,style:w,className:S,labelClassName:C,labelStyle:D}=e,N=I?.tip,L=!!I?.isInvalid,M=(0,o.useMemo)(()=>s()(eL,S,t,{"dx-invalid":L}),[L]),V=(0,o.useMemo)(()=>s()(`${eL}-label-warp`,C,n),[C,n]),$=(0,o.useMemo)(()=>s()(`${eL}-body-error`,{[R]:!!R}),[R]),P=(0,o.useMemo)(()=>y&&("left"===h||"between"==p),[y,h]),A=(0,o.useMemo)(()=>p&&"hide"!==h,[p,h]);return(0,r.jsxs)(eN,{style:{...i,...w},className:M,$colSpan:b,$rowSpan:F,$onlyRuleStyle:f,$colCount:c,children:[(0,r.jsxs)(eD,{$labelMode:h,className:`${eL}-container`,children:[A?(0,r.jsx)(ev,{style:{...a,...D},className:V,children:(0,r.jsx)(eI,{$required:j,$showColon:P,htmlFor:v,className:`${eL}-label`,children:p})}):(0,r.jsx)(o.Fragment,{}),(0,r.jsxs)(eR,{className:`${eL}-body`,children:[(0,r.jsx)(ej,{className:`${eL}-body-input`,children:u}),g?(0,r.jsx)(eS,{className:`${eL}-body-help`,children:g}):(0,r.jsx)(o.Fragment,{}),L?(0,r.jsx)(ew,{$layout:R,className:$,children:N}):(0,r.jsx)(o.Fragment,{})]})]}),x?(0,r.jsx)(eC,{className:`${eL}-extra`,children:x}):(0,r.jsx)(o.Fragment,{})]})}),eV=e=>{let{trigger:t="onChange",dependencies:n,noticeOnlyRuleDataField:r,isNoticeParentField:a,noticeWatchField:s,preserve:i,valuePropName:l="value",getValuePath:m=l,getValueFromEvent:d,formatValue:c,onAfterUpdate:u,useAttrs:h,useRules:f,attrs:p,children:g,...x}=e,{formItemInstance:y,form:b,ruleInstance:F,newName:I}=et({...x});y.dependencies=n,y.noticeOnlyRuleDataField=r,y.isNoticeParentField=a,y.onAfterUpdate=u,y.noticeWatchField=s,y.preserve=i;let v=b.getFieldValue(I),j=e=>{try{let t=e;"function"==typeof d?t=d(e,b,y):e&&e.target&&"object"==typeof e.target&&m in e.target&&(t=_(e.target,m)),"function"==typeof c&&(t=c(t,b,y,e)),v!==t&&(b.updatedFieldValue(I,t,"validate"),y.onAfterUpdate?.(t,b,y,e),Array.isArray(y.noticeWatchField)&&y.noticeWatchField.length&&b.noticeWatch(y.noticeWatchField),Array.isArray(y.noticeOnlyRuleDataField)&&y.noticeOnlyRuleDataField.length&&b.onlyValidate(y.noticeOnlyRuleDataField),y.isNoticeParentField&&y.parentDataField&&b.notice(y.parentDataField))}catch(e){console.log(e)}};y.onChange=j;let R=ec(I);y.htmlFor=R;let w={[t]:j,...p,name:I,id:R,[l]:v},S=h?.(w,b,y)||w;y.control=S,f?.(F,b,y);let C=(0,o.useMemo)(()=>F.getValidateResult(),[F.messages]);return{children:(0,o.isValidElement)(g)?(0,o.cloneElement)(g,S):g,form:b,formItemInstance:y,ruleInstance:F,onChange:j,htmlFor:R,validateResult:C}},e$=o.memo(e=>{let{labelMode:t,noStyle:n,onlyRuleStyle:o,label:a,helpText:s,extra:i,errorLayout:l,required:m,showColon:d,colSpan:c,rowSpan:u,...h}=e,{children:f,ruleInstance:p,formItemInstance:g,htmlFor:x,validateResult:y}=eV({...h});return n?(0,r.jsx)(J,{name:g.name,sort:g.sort,children:f}):(0,r.jsx)(J,{name:g.name,sort:g.sort,children:(0,r.jsx)(eM,{labelMode:t,onlyRuleStyle:o,required:m||p?.isRequired?.(),label:a,helpText:s,extra:i,errorLayout:l,showColon:d,colSpan:c,rowSpan:u,htmlFor:x,validateResult:y,children:f})})}),eP=o.memo(e=>{let{name:t}=e;if(t)return(0,r.jsx)(e$,{...e,name:t});let{labelMode:n,onlyRuleStyle:o,label:a,helpText:s,extra:i,errorLayout:l,required:m,showColon:d,colSpan:c,rowSpan:u,children:h}=e;return(0,r.jsx)(eM,{labelMode:n,onlyRuleStyle:o,required:m,label:a,helpText:s,extra:i,errorLayout:l,showColon:d,colSpan:c,rowSpan:u,children:h})}),eA=o.memo(e=>{let{name:t,sort:n,isJoinParentField:a}=e,{isHide:s}=Y({name:t,sort:n,isJoinParentField:a});return s?(0,r.jsx)(o.Fragment,{}):(0,r.jsx)(e$,{...e})}),e_=o.memo(e=>{let{children:t,...n}=e,{formListInstance:o,ruleInstance:a,formItemInstance:s}=eo(n);return(0,r.jsx)(en.Provider,{value:o,children:(0,r.jsx)(J,{name:o.name,sort:o.sort,children:t({fields:o.getFields(),onAdd:o.onAdd,onDelete:o.onDelete,onMove:o.onMove},{ruleInstance:a,formItemInstance:s,formListInstance:o})})})});function eE(e){let{children:t,form:n,style:a,className:i,formData:l,hideData:m,hideRuleData:d,isAutoUpdatedFormData:c=!1,name:u,onFinish:h,onFinishFailed:f,onValuesChange:p,layoutStyle:g,layoutClassName:x,bgcolor:y,...b}=e,F=Q(n);ei(F,u);let I=(0,o.useMemo)(()=>s()("carefrees-form",i),[]);return(0,o.useMemo)(()=>F.ctor(l,m,d),[]),F.onFinish=h,F.onValuesChange=p,F.onFinishFailed=f,(0,o.useEffect)(()=>{c&&F.resetFormValues(l)},[c,l]),(0,r.jsx)(G.Provider,{value:F,children:(0,r.jsx)(eF,{$bgcolor:y,className:I,style:a,onSubmit:e=>{e?.preventDefault?.(),e?.stopPropagation?.(),F.submit()},children:(0,r.jsx)(ey,{...b,className:x,style:g,children:t})})})}},1790:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(4246),o=n(980),a=n(199),s=n(315),i=n(2446),l=n(2316),m=n(9806),d=n(6250),c=n(5889);function u(e){let t=Object.assign({h1:"h1",a:"a",h2:"h2",pre:"pre",code:"code",h3:"h3"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.h1,{id:"pc--h5",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#pc--h5",children:"#"}),"pc & h5"]}),"\n",(0,r.jsxs)(t.h2,{id:"安装",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"}),"安装"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"npm install @carefrees/form-utils-react # yarn add @carefrees/form-utils-react # pnpm add @carefrees/form-utils-react\n"})}),"\n",(0,r.jsxs)(t.h2,{id:"使用",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#使用",children:"#"}),"使用"]}),"\n",(0,r.jsxs)(t.h3,{id:"基本使用",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"}),"基本使用"]}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_react_react_1",children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",meta:"preview",children:'import { Form, FormItem, useForm } from \'@carefrees/form-utils-react\';\nimport React, { useState } from \'react\';\n\nconst Demo = () => {\n  const [formData] = useState({ name: \'\', age: 18 });\n  const form = useForm();\n\n  const onSubmit = async () => {\n    try {\n      console.log(form);\n      const result = await form.validate();\n      console.log(result);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return (\n    <Form formData={formData} form={form}>\n      <FormItem rules={[{ required: true, message: \'必填\' }]} name="name" label="name">\n        <input style={{ width: \'100%\' }} placeholder="请输入" />\n      </FormItem>\n      <FormItem name="age" label="age">\n        <input style={{ width: \'100%\' }} placeholder="请输入" />\n      </FormItem>\n      <FormItem name="address" label="address">\n        <input style={{ width: \'100%\' }} placeholder="请输入" />\n      </FormItem>\n      <div style={{ display: \'flex\', alignItems: \'flex-end\', padding: 8 }}>\n        <button type="button" onClick={onSubmit}>\n          验\uD83D\uDE01\uD83D\uDE1D证\n        </button>\n      </div>\n    </Form>\n  );\n};\n\nexport default Demo;\n'})}),(0,r.jsx)(a.Z,{})]}),"\n",(0,r.jsxs)(t.h3,{id:"控制隐藏",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#控制隐藏",children:"#"}),"控制隐藏"]}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_react_react_2",children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",meta:"preview",children:"import { Form, FormItem, FormHideItem, useForm } from '@carefrees/form-utils-react';\nimport React, { useState } from 'react';\n\nconst Demo = () => {\n  const [formData] = useState({ name: '张三', age: '' });\n  const form = useForm();\n\n  const onSubmit = async () => {\n    try {\n      console.log(form);\n      const result = await form.validate();\n      console.log(result);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const onValuesChange = (item: any) => {\n    console.log('item', item);\n    if (Reflect.has(item, 'age')) {\n      if (item.age === '18') {\n        form.updatedFieldHideValue({ address: false });\n      } else {\n        form.updatedFieldHideValue({ address: true });\n      }\n    }\n  };\n\n  return (\n    <Form formData={formData} form={form} onValuesChange={onValuesChange} hideData={{ address: true }}>\n      <FormItem rules={[{ required: true, message: '必填' }]} name=\"name\" label=\"name\">\n        <input style={{ width: '100%' }} placeholder=\"请输入\" />\n      </FormItem>\n      <FormItem name=\"age\" label=\"age\">\n        <input style={{ width: '100%' }} placeholder=\"请输入18,显示address表单项\" />\n      </FormItem>\n      <FormHideItem name=\"address\" label=\"address\">\n        <input style={{ width: '100%' }} placeholder=\"请输入\" />\n      </FormHideItem>\n      <div style={{ display: 'flex', alignItems: 'flex-end', padding: 8 }}>\n        <button type=\"button\" onClick={onSubmit}>\n          验\uD83D\uDE01\uD83D\uDE1D证\n        </button>\n      </div>\n    </Form>\n  );\n};\nexport default Demo;\n"})}),(0,r.jsx)(s.Z,{})]}),"\n",(0,r.jsxs)(t.h3,{id:"表单字段监听",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#表单字段监听",children:"#"}),"表单字段监听"]}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_react_react_3",children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",meta:"preview",children:"import { Form, FormItem, useWatch, useForm, FormLayoutRows } from '@carefrees/form-utils-react';\nimport React, { useState } from 'react';\n\n// 子节点\nconst Child = () => {\n  // 第一次监听可以获取到值\n  const [value] = useWatch('name');\n  return <div>表单内部监听name值：{value}</div>;\n};\n\nconst Demo = () => {\n  const [formData] = useState({ name: '张三', age: 18 });\n  const form = useForm();\n\n  // 在表单包裹内,第一次监听获取不到值\n  const [age] = useWatch('age', form);\n  // console.log(age);\n\n  const onSubmit = async () => {\n    try {\n      console.log(form);\n      const result = await form.validate();\n      console.log(result);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Form formData={formData} form={form}>\n      <FormItem rules={[{ required: true, message: '必填' }]} name=\"name\" label=\"name\">\n        <input style={{ width: '100%' }} placeholder=\"请输入\" />\n      </FormItem>\n      <FormItem name=\"age\" label=\"age\">\n        <input style={{ width: '100%' }} placeholder=\"请输入\" />\n      </FormItem>\n      <FormLayoutRows>\n        <Child />\n        <div style={{ display: 'flex', alignItems: 'flex-end', padding: 8 }}>\n          <button type=\"button\" onClick={onSubmit}>\n            表单外部监听age字段值:{age}\n          </button>\n        </div>\n      </FormLayoutRows>\n    </Form>\n  );\n};\nexport default Demo;\n"})}),(0,r.jsx)(i.Z,{})]}),"\n",(0,r.jsxs)(t.h3,{id:"list-表单项",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#list-表单项",children:"#"}),"list 表单项"]}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_react_react_4",children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",meta:"preview",children:"import { Form, FormItem, useWatch, useForm, FormList, FormLayoutRows, FormLayout } from '@carefrees/form-utils-react';\nimport React, { useState } from 'react';\n\n// 子节点\nconst Child = () => {\n  // 第一次监听可以获取到值\n  const [value] = useWatch('list');\n  return <div>list值：{JSON.stringify(value)}</div>;\n};\n\nconst Demo = () => {\n  const [formData] = useState({\n    name: '张三',\n    age: 18,\n    list: [{ name: '张三' }, { name: '李四' }],\n  });\n  const form = useForm();\n\n  const onSubmit = async () => {\n    try {\n      console.log(form);\n      const result = await form.validate();\n      console.log(result);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Form formData={formData} form={form}>\n      <FormItem rules={[{ required: true, message: '必填' }]} name=\"name\" label=\"name\">\n        <input style={{ width: '100%' }} placeholder=\"请输入\" />\n      </FormItem>\n      <FormItem name=\"age\" label=\"age\">\n        <input style={{ width: '100%' }} placeholder=\"请输入\" />\n      </FormItem>\n      <FormLayoutRows>\n        <FormList name=\"list\">\n          {(options) => {\n            const fields = options.fields;\n            return (\n              <div>\n                <button type=\"button\" onClick={() => options.onAdd({})}>\n                  添加一项数据\n                </button>\n                {fields.map((item, index) => {\n                  return (\n                    <FormLayout key={item.key}>\n                      <FormItem name={`[${item.name}].name`} label=\"子项name\">\n                        <input style={{ width: '100%' }} placeholder=\"请输入\" />\n                      </FormItem>\n                      <div\n                        style={{\n                          display: 'flex',\n                          alignItems: 'flex-end',\n                          padding: 8,\n                        }}\n                      >\n                        <button type=\"button\" onClick={() => options.onDelete(index)}>\n                          删除数据\n                        </button>\n                      </div>\n                    </FormLayout>\n                  );\n                })}\n              </div>\n            );\n          }}\n        </FormList>\n      </FormLayoutRows>\n      <FormLayoutRows>\n        <Child />\n        <div style={{ display: 'flex', alignItems: 'flex-end', padding: 8 }}>\n          <button type=\"button\" onClick={onSubmit}>\n            提交\n          </button>\n        </div>\n      </FormLayoutRows>\n    </Form>\n  );\n};\nexport default Demo;\n"})}),(0,r.jsx)(l.Z,{})]}),"\n",(0,r.jsxs)(t.h3,{id:"表单项依赖更新dependencies-参数",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#表单项依赖更新dependencies-参数",children:"#"}),"表单项依赖更新(dependencies 参数)"]}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_react_react_5",children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",meta:"preview",children:'import { Form, FormItem, useWatch, useForm, FormLayoutRows, useFormInstance } from \'@carefrees/form-utils-react\';\nimport React, { useState, useMemo } from \'react\';\n\n// 子节点\nconst ChildInput = () => {\n  const form = useFormInstance();\n  const a = form.getFieldValue(\'a\');\n  const b = form.getFieldValue(\'b\');\n  const value = useMemo(() => {\n    if (a && b) {\n      return a * b;\n    }\n    return 0;\n  }, [a, b]);\n  // 第一次监听可以获取到值\n  return <input placeholder="请输入a和b" disabled value={value} />;\n};\n\nconst Demo = () => {\n  const [formData] = useState({ a: 0, b: 0 });\n  const form = useForm();\n\n  const onSubmit = async () => {\n    try {\n      console.log(form);\n      const result = await form.validate();\n      console.log(result);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Form formData={formData} form={form}>\n      <FormItem name="a" label="a">\n        <input type="number" style={{ width: \'100%\' }} placeholder="请输入" />\n      </FormItem>\n      <FormItem name="b" label="b">\n        <input type="number" style={{ width: \'100%\' }} placeholder="请输入" />\n      </FormItem>\n      <FormItem dependencies={[\'a\', \'b\']} name="c" label="请输入a和b">\n        <ChildInput />\n      </FormItem>\n      <FormLayoutRows>\n        <div style={{ display: \'flex\', alignItems: \'flex-end\', padding: 8 }}>\n          <button type="button" onClick={onSubmit}>\n            提交\n          </button>\n        </div>\n      </FormLayoutRows>\n    </Form>\n  );\n};\nexport default Demo;\n'})}),(0,r.jsx)(m.Z,{})]}),"\n",(0,r.jsxs)(t.h3,{id:"布局组件",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#布局组件",children:"#"}),"布局组件"]}),"\n",(0,r.jsxs)(c.Z,{isMobile:"false",demoId:"_react_react_6",children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",meta:"preview",children:'import {\n  Form,\n  FormItem,\n  useWatch,\n  useForm,\n  FormLayoutRows,\n  useFormInstance,\n  FormLayout,\n} from \'@carefrees/form-utils-react\';\nimport React, { useState, useMemo } from \'react\';\n\nconst Demo = () => {\n  const [formData] = useState({\n    a: \'\',\n    b: \'\',\n    c: \'\',\n    d: \'\',\n    e: \'\',\n    f: \'\',\n    g: \'\',\n    h: \'\',\n    j: \'\',\n    k: \'\',\n    l: \'\',\n    m: \'\',\n    address: \'\',\n  });\n  const form = useForm();\n  const [state, setState] = useState<{ row?: number; col?: number }>({ row: undefined, col: undefined });\n\n  const onSubmit = async () => {\n    try {\n      console.log(form);\n      const result = await form.validate();\n      console.log(result);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Form gap={14} colCount={4} formData={formData} form={form}>\n      <FormLayout formItemLabelStyle={{ width: 60 }} isAllColSpan labelMode="left" bordered title="标题1">\n        <FormItem rules={[{ required: true, message: \'必填\' }]} name="a" label="测试1">\n          <input style={{ width: \'100%\' }} placeholder="请输入18,显示address表单项" />\n        </FormItem>\n        <FormItem name="address" label="address">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n      </FormLayout>\n      <FormLayout\n        onGapRow={(row, col) => {\n          console.log(row, col);\n          setState({ row, col });\n        }}\n        isAllColSpan\n        labelMode="top"\n        bordered\n        title="标题2"\n      >\n        <FormItem colSpan={2} rules={[{ required: true, message: \'必填\' }]} name="a" label="测试1">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem rowSpan={2} rules={[{ required: true, message: \'必填\' }]} name="b" label="测试2">\n          <textarea style={{ width: \'100%\', height: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="c" label="测试3">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="d" label="测试4">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="e" label="测试5">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="f" label="测试6">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="g" label="测试7">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="h" label="测试8">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="j" label="测试9">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="k" label="测试10">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <div style={{ gridColumn: state.col, gridRow: state.row, padding: 8 }}>\n          <button type="button" onClick={onSubmit}>\n            验\uD83D\uDE01\uD83D\uDE1D证\n          </button>\n        </div>\n      </FormLayout>\n      <FormLayout isAllColSpan labelMode="top" title="标题2">\n        <FormItem rules={[{ required: true, message: \'必填\' }]} name="a" label="测试1">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n        <FormItem name="address" label="address">\n          <input style={{ width: \'100%\' }} placeholder="请输入" />\n        </FormItem>\n      </FormLayout>\n    </Form>\n  );\n};\nexport default Demo;\n'})}),(0,r.jsx)(d.Z,{})]}),"\n",(0,r.jsxs)(t.h2,{id:"类型",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#类型",children:"#"}),"类型"]}),"\n",(0,r.jsxs)(t.h3,{id:"form-表单",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#form-表单",children:"#"}),"Form 表单"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import React from 'react';\nimport { FormInstanceBase, ValidateErrorEntity } from '@carefrees/form-utils';\nimport { FormLayoutProps } from '@carefrees/form-utils-react/esm/layout';\n\nexport interface FormProps<T = any> extends FormLayoutProps {\n  children?: React.ReactNode;\n  form?: FormInstanceBase;\n  style?: React.CSSProperties;\n  className?: string;\n  layoutClassName?: string;\n  layoutStyle?: React.CSSProperties;\n  /**表单数据*/\n  formData?: any;\n  /**值更新触发*/\n  onValuesChange?: (changedValues: Partial<T>, values: T) => void;\n  /**提交保存 验证成功*/\n  onFinish?: (values: T) => void;\n  /**提交保存 验证失败*/\n  onFinishFailed?: (errorInfo: ValidateErrorEntity<T>) => void;\n  /**隐藏表单项初始值*/\n  hideData?: Record<string, boolean>;\n  /**表单名称*/\n  name?: string;\n  /**隐藏规则校验*/\n  hideRuleData?: Record<string, boolean>;\n  /**自动重置更新formData数据*/\n  isAutoUpdatedFormData?: boolean;\n  /**背景颜色*/\n  bgcolor?: string;\n}\nexport declare function Form<T = any>(props: FormProps<T>): import('react/jsx-runtime').JSX.Element;\n"})}),"\n",(0,r.jsxs)(t.h3,{id:"formitem-表单项",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#formitem-表单项",children:"#"}),"FormItem 表单项"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { LayoutFormItemProps } from '@carefrees/form-utils-react/esm/layout/layout.formItem';\nimport { FormItemAttrOptions } from '@carefrees/form-utils-react/esm/hooks/attr/attr.FormItem';\nimport React from 'react';\nexport interface FormItemProps extends FormItemAttrOptions, LayoutFormItemProps {\n  /**不进行样式渲染*/\n  noStyle?: boolean;\n}\n/**表单项*/\nexport declare const FormItem: React.MemoExoticComponent<\n  (props: Partial<FormItemProps>) => import('react/jsx-runtime').JSX.Element\n>;\n/**隐藏表单项*/\nexport declare const FormHideItem: React.MemoExoticComponent<\n  (props: FormItemProps) => import('react/jsx-runtime').JSX.Element\n>;\n"})}),"\n",(0,r.jsxs)(t.h3,{id:"formlist-表单-list",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#formlist-表单-list",children:"#"}),"FormList 表单 List"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { RuleInstanceBase, FormItemInstanceBase, FormListInstanceBase } from '@carefrees/form-utils';\nimport React from 'react';\nimport { RegisterFormListOptions } from '@carefrees/form-utils-react-hooks';\nexport interface FormListChildrenProps {\n  /**数据集合*/\n  fields: {\n    name: number;\n    key: number;\n  }[];\n  /**添加*/\n  onAdd: (initialValue?: Object) => void;\n  /**删除*/\n  onDelete: (index: number | number[]) => void;\n  /**移动*/\n  onMove: (from: number, to: number) => void;\n}\nexport interface FormListProps extends RegisterFormListOptions {\n  children: (\n    options: FormListChildrenProps,\n    instances: {\n      ruleInstance: RuleInstanceBase;\n      formItemInstance: FormItemInstanceBase;\n      formListInstance: FormListInstanceBase;\n    },\n  ) => React.ReactNode;\n}\n/**form list 组件*/\nexport declare const FormList: React.MemoExoticComponent<\n  (props: FormListProps) => import('react/jsx-runtime').JSX.Element\n>;\n/**隐藏 form list item 组件*/\nexport declare const FormHideList: React.MemoExoticComponent<\n  (props: FormListProps) => import('react/jsx-runtime').JSX.Element\n>;\n"})}),"\n",(0,r.jsxs)(t.h3,{id:"布局组件-类型",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#布局组件-类型",children:"#"}),"布局组件 类型"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import React from 'react';\nimport { AttrsOptions } from '@carefrees/form-utils-react-hooks';\nimport { FormLayoutBodyProps } from '@carefrees/form-utils-react/esm/layout/layout.body';\nexport interface FormLayoutProps extends AttrsOptions, FormLayoutBodyProps {\n  /**标题*/\n  title?: React.ReactNode;\n  /**额外内容*/\n  extra?: React.ReactNode;\n  /**内容*/\n  children?: React.ReactNode;\n  /**是否占据整行*/\n  isAllColSpan?: boolean;\n  className?: string;\n  /**头部ClassName*/\n  headerClassName?: string;\n  /**内容ClassName*/\n  bodyClassName?: string;\n  style?: React.CSSProperties;\n  /**头部样式*/\n  headerStyle?: React.CSSProperties;\n  /**内容样式*/\n  bodyStyle?: React.CSSProperties;\n  /**是否添加边框*/\n  bordered?: boolean;\n}\n/**布局组件*/\nexport declare const FormLayout: React.MemoExoticComponent<\n  (props: FormLayoutProps) => import('react/jsx-runtime').JSX.Element\n>;\nexport interface FormLayoutRowsProps\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {}\n/**布局组件 占据一整行*/\nexport declare const FormLayoutRows: React.ForwardRefExoticComponent<\n  Omit<FormLayoutRowsProps, 'ref'> & React.RefAttributes<HTMLDivElement>\n>;\n"})}),"\n",(0,r.jsxs)(t.h3,{id:"布局组件内容-类型",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#布局组件内容-类型",children:"#"}),"布局组件内容 类型"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import React from 'react';\nimport { SizeInfo } from '@carefrees/form-utils-react/esm/hooks/useResizeObserver';\nexport interface FormLayoutBodyProps {\n  className?: string;\n  style?: React.CSSProperties;\n  /**列数据*/\n  colCount?: number;\n  /**\n   * @description gap 属性是用来设置网格行与列之间的间隙，该属性是row-gap and column-gap的简写形式。\n   */\n  gap?: string | number;\n  /**\n   * 获取多少行\n   */\n  onGapRow?: (row: number, col: number, target: HTMLDivElement) => void;\n  /**内容大小变化*/\n  onResize?: (size: SizeInfo, target: HTMLDivElement) => void;\n  /**内容*/\n  children?: React.ReactNode;\n}\n/**布局组件-内容区域*/\nexport declare const FormLayoutBody: React.MemoExoticComponent<\n  (props: FormLayoutBodyProps) => import('react/jsx-runtime').JSX.Element\n>;\n"})}),"\n",(0,r.jsxs)(t.h3,{id:"表单项布局组件类型",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#表单项布局组件类型",children:"#"}),"表单项布局组件类型"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import React from 'react';\nexport interface LayoutFormItemProps {\n  /**规则校验失败错误提示位置*/\n  errorLayout?: 'left-bottom' | 'right-bottom' | 'top-right' | 'top-left';\n  /**必填样式*/\n  required?: boolean;\n  /**label显示模式*/\n  labelMode?: 'left' | 'top' | 'between' | 'hide';\n  /**内容*/\n  children?: React.ReactNode;\n  /**只进行规则样式*/\n  onlyRuleStyle?: boolean;\n  label?: React.ReactNode;\n  /**底部提示内容*/\n  helpText?: React.ReactNode;\n  /**额外内容*/\n  extra?: React.ReactNode;\n  /**是否显示label后的冒号*/\n  showColon?: boolean;\n  /**\n   * 表单项占据列数\n   * @default 1\n   */\n  colSpan?: number;\n  /**\n   * 表单项占据行数\n   * @default 1\n   */\n  rowSpan?: number;\n  htmlFor?: string;\n  /**规则验证结果*/\n  validateResult?: {\n    tip: string | (string | undefined)[];\n    isInvalid: boolean;\n  };\n  style?: React.CSSProperties;\n  className?: string;\n  labelStyle?: React.CSSProperties;\n  labelClassName?: string;\n}\n/**布局组件 表单项*/\nexport declare const LayoutFormItem: React.MemoExoticComponent<\n  (props: LayoutFormItemProps) => import('react/jsx-runtime').JSX.Element\n>;\n"})}),"\n",(0,r.jsxs)(t.h3,{id:"表单项参数",children:[(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#表单项参数",children:"#"}),"表单项参数"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { RuleInstanceBase, FormInstanceBase, FormItemInstanceBase } from '@carefrees/form-utils';\nimport { RegisterFormItemOptions } from '@carefrees/form-utils-react-hooks';\nimport React from 'react';\nexport interface FormItemAttrOptions extends RegisterFormItemOptions {\n  /**依赖更新项*/\n  dependencies?: string[];\n  /**通知 只用于校验规则提示 字段 */\n  noticeOnlyRuleDataField?: string[];\n  /**通知父级字段监听方法更新*/\n  isNoticeParentField?: boolean;\n  /**通知watch监听方法更新*/\n  noticeWatchField?: string[];\n  /**是否保护值(不进行表单项组件卸载重置初始值)*/\n  preserve?: boolean;\n  /**重写规则*/\n  useRules?: (ruleInstance: RuleInstanceBase, form: FormInstanceBase, formItemInstance: FormItemInstanceBase) => void;\n  /**输入框属性重写*/\n  useAttrs?: (attrs: any, form: FormInstanceBase, formItemInstance: FormItemInstanceBase) => any;\n  /**输入框属性*/\n  attrs?: any;\n  /**传递组件字段*/\n  valuePropName?: string;\n  /**取值字段(默认和valuePropName值相同)*/\n  getValuePath?: string;\n  /**自定义获取值*/\n  getValueFromEvent?: (event: any, form: FormInstanceBase, formItemInstance: FormItemInstanceBase) => any;\n  /**值格式化*/\n  formatValue?: (value: any, form: FormInstanceBase, formItemInstance: FormItemInstanceBase, event: any) => any;\n  /**触发数据更新之后触发（用于数据联动之类的）*/\n  onAfterUpdate?: (value: any, form: FormInstanceBase, formItemInstance: FormItemInstanceBase, event: any) => void;\n  /**事件名称*/\n  trigger?: string;\n  /**子元素*/\n  children?: React.ReactNode;\n}\n/**表单项参数*/\nexport declare const useFormItemAttr: (options: FormItemAttrOptions) => {\n  children:\n    | string\n    | number\n    | boolean\n    | React.ReactElement<any, string | React.JSXElementConstructor<any>>\n    | Iterable<React.ReactNode>;\n  form: FormInstanceBase<any>;\n  formItemInstance: FormItemInstanceBase;\n  ruleInstance: RuleInstanceBase;\n  onChange: (event: any) => void;\n  htmlFor: string;\n  validateResult: {\n    tip: string | (string | undefined)[];\n    isInvalid: boolean;\n  };\n};\n"})})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,o.ah)(),e.components);return t?(0,r.jsx)(t,Object.assign({},e,{children:(0,r.jsx)(u,e)})):u(e)}let f=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["react%2Freact.mdx"]={toc:[{id:"安装",text:"安装",depth:2},{id:"使用",text:"使用",depth:2},{id:"基本使用",text:"基本使用",depth:3},{id:"控制隐藏",text:"控制隐藏",depth:3},{id:"表单字段监听",text:"表单字段监听",depth:3},{id:"list-表单项",text:"list 表单项",depth:3},{id:"表单项依赖更新dependencies-参数",text:"表单项依赖更新(dependencies 参数)",depth:3},{id:"布局组件",text:"布局组件",depth:3},{id:"类型",text:"类型",depth:2},{id:"form-表单",text:"Form 表单",depth:3},{id:"formitem-表单项",text:"FormItem 表单项",depth:3},{id:"formlist-表单-list",text:"FormList 表单 List",depth:3},{id:"布局组件-类型",text:"布局组件 类型",depth:3},{id:"布局组件内容-类型",text:"布局组件内容 类型",depth:3},{id:"表单项布局组件类型",text:"表单项布局组件类型",depth:3},{id:"表单项参数",text:"表单项参数",depth:3}],title:"pc & h5",headingTitle:"pc & h5",frontmatter:{}}}}]);